{"version":3,"sources":["common/constants.js","common/config.js","common/speech.js","common/util.js","hooks/useWakeLock.js","components/CopyButton.js","components/AthletesSettings.js","assets/discord.svg","assets/discordMark.svg","components/DiscordBot.js","components/Footer.js","components/Header.js","components/VoiceSettings.js","components/App.js","hooks/useVoices.js","index.js"],"names":["DEFAULT_ATHLETE_NAMES","LOCAL_STORAGE_KEY","DEFAULT_ATHLETES","slice","map","athleteName","text","enabled","time","voiceCommands","voiceChanged","start","15","nextAthlete","10","5","2","1","0","speakCommand","command","args","voice","msg","SpeechSynthesisUtterance","lang","window","speechSynthesis","cancel","speak","toSeconds","ms","Math","round","isSupported","navigator","CopyButton","useState","copied","setCopied","copiedTimeout","useRef","undefined","OverlayTrigger","placement","overlay","Tooltip","id","Button","variant","onClick","clipboard","writeText","current","clearTimeout","setTimeout","icon","faCopy","AthletesSettings","athletes","onChange","discordCommand","athlete","trim","replaceAll","join","athleteIndex","Form","Group","as","Row","controlId","Col","sm","InputGroup","Control","style","background","type","placeholder","value","e","a","ai","target","min","Append","ButtonGroup","toggle","ToggleButton","name","checked","disabled","filter","length","faSkullCrossbones","DiscordBot","Alert","Heading","Badge","pill","xs","md","src","discordLogo","alt","className","discordMarkLogo","rel","href","Footer","faPaypal","faGithub","Header","Navbar","bg","Brand","faBiking","VoiceSettings","voices","Label","newVoiceURI","newVoice","find","v","voiceURI","Text","padding","fontSize","border","location","reload","initialConfig","rawConfig","localStorage","getItem","config","JSON","parse","speechEnabled","startDelay","loadConfig","App","state","setState","active","wakelockRef","useEffect","release","request","document","visibilityState","wakeLock","addEventListener","removeEventListener","useWakeLock","setStartDelay","setSpeechEnabled","setAthletes","getAthleteName","setVoices","updateVoices","getVoices","onvoiceschanged","startsWith","useVoices","setVoiceURI","timeUntilNextChange","setTimeUntilNextChange","currentAthlete","setCurrentAthlete","setItem","stringify","useMemo","athletesWithIndex","index","startTimeRef","prevTimeRef","pauseTimeRef","changeToNextAthlete","now","Date","useInterval","changeTime","secondsSinceStart","max","Container","Jumbotron","faArrowRight","faClock","ProgressBar","transform","faStop","faPlay","faPause","faForward","size","Card","Body","newCount","newAthletes","Array","keys","i","Check","label","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.af1e3d4a.chunk.js","sourcesContent":["export const DEFAULT_ATHLETE_NAMES = [\"Amelia\", \"Bowie\", \"Coco\", \"Dan\", \"Emma\", \"Finn\", \"Grace\", \"Henry\", \"Irene\", \"Jack\"];\n\nexport const DEFAULT_START_DELAY = 0;\nexport const DEFAULT_TIME_PER_ATHLETE = 30;\nexport const DEFAULT_SPEECH_ENABLED = false;\n","import { DEFAULT_ATHLETE_NAMES, DEFAULT_SPEECH_ENABLED, DEFAULT_START_DELAY, DEFAULT_TIME_PER_ATHLETE } from \"./constants\";\n\nconst LOCAL_STORAGE_KEY = \"config\";\n\nconst DEFAULT_ATHLETES = DEFAULT_ATHLETE_NAMES.slice(0, 6).map((athleteName) => ({\n    text: athleteName,\n    enabled: true,\n    time: DEFAULT_TIME_PER_ATHLETE,\n}));\n\nexport function loadConfig() {\n    try {\n        const rawConfig = localStorage.getItem(LOCAL_STORAGE_KEY);\n        const config = JSON.parse(rawConfig);\n\n        return {\n            athletes: config.athletes || DEFAULT_ATHLETES,\n            speechEnabled: config.speechEnabled,\n            startDelay: config.startDelay,\n            voice: config.voice,\n        };\n    } catch {\n        return {\n            athletes: DEFAULT_ATHLETES,\n            speechEnabled: DEFAULT_SPEECH_ENABLED,\n            startDelay: DEFAULT_START_DELAY,\n        };\n    }\n}\n\nexport function saveConfig(config) {\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(config));\n}\n","const voiceCommands = {\n    voiceChanged: () => \"Go faster!\",\n    start: () => \"Start\",\n    15: ({ nextAthlete }) => `${nextAthlete}. Get ready.`,\n    10: () => \"Change in 10\",\n    5: () => \"Five\",\n    2: () => \"Two\",\n    1: () => \"One\",\n    0: ({ nextAthlete }) => `Change to ${nextAthlete}`,\n};\n\nexport function speakCommand(command, args, voice) {\n    if (voiceCommands[command]) {\n        speak(voiceCommands[command](args), voice);\n    }\n}\n\nexport function speak(text, voice) {\n    const msg = new SpeechSynthesisUtterance();\n    msg.text = text;\n    msg.lang = \"en-US\";\n    msg.voice = voice;\n\n    window.speechSynthesis.cancel();\n    window.speechSynthesis.speak(msg);\n}\n","export function toSeconds(ms) {\n    return Math.round(ms / 1_000);\n}\n","import { useEffect, useRef } from \"react\";\n\nconst isSupported = \"wakeLock\" in navigator;\n\nexport function useWakeLock(active) {\n    const wakelockRef = useRef(null);\n\n    useEffect(() => {\n        if (!isSupported) {\n            return;\n        }\n\n        if (!active) {\n            return;\n        }\n\n        const release = async () => {\n            await wakelockRef.current?.release();\n            wakelockRef.current = null;\n        };\n\n        const request = async () => {\n            if (document.visibilityState !== \"visible\") {\n                return;\n            }\n\n            try {\n                await release();\n                wakelockRef.current = await navigator.wakeLock.request(\"screen\");\n            } catch {}\n        };\n\n        request();\n        document.addEventListener(\"visibilitychange\", request);\n\n        return () => {\n            release();\n            document.removeEventListener(\"visibilitychange\", request);\n        };\n    }, [active]);\n}\n","import { faCopy } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { useRef, useState } from \"react\";\nimport { Button, OverlayTrigger, Tooltip } from \"react-bootstrap\";\n\nexport function CopyButton({ command }) {\n    const [copied, setCopied] = useState(false);\n    const copiedTimeout = useRef(undefined);\n\n    const copyCommand = () => {\n        navigator.clipboard.writeText(command);\n\n        if (copiedTimeout.current) {\n            clearTimeout(copiedTimeout.current);\n            copiedTimeout.current = undefined;\n        }\n        setCopied(true);\n        copiedTimeout.current = setTimeout(() => setCopied(false), 5_000);\n    };\n\n    return (\n        <OverlayTrigger\n            placement=\"right\"\n            overlay={<Tooltip id=\"tooltip-copy-athletes\">{copied ? \"Copied!\" : \"Copy Discord Bot command\"}</Tooltip>}\n        >\n            <Button variant=\"outline-link\" onClick={copyCommand}>\n                <FontAwesomeIcon icon={faCopy} />\n            </Button>\n        </OverlayTrigger>\n    );\n}\n","import { faSkullCrossbones } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { ButtonGroup, Col, Form, InputGroup, Row, ToggleButton } from \"react-bootstrap\";\nimport { CopyButton } from \"./CopyButton\";\n\nexport function AthletesSettings({ athletes, onChange }) {\n    const discordCommand = `!t config athletes ${athletes\n        .map((athlete) => `${athlete.text.trim().replaceAll(\" \", \"_\").replaceAll(\" \", \"_\")}:${athlete.time}`)\n        .join(\" \")}`;\n\n    return (\n        <>\n            <h3>\n                Athletes <CopyButton command={discordCommand} />\n            </h3>\n\n            {athletes.map((athlete, athleteIndex) => (\n                <Form.Group key={athleteIndex} as={Row} controlId={`athlete-${athleteIndex}`}>\n                    <Col sm={12}>\n                        <InputGroup>\n                            <Form.Control\n                                style={{ background: !athlete.enabled && \"#6c757d80\" }}\n                                type=\"text\"\n                                placeholder=\"Name\"\n                                value={athlete.text}\n                                onChange={(e) =>\n                                    onChange(\n                                        athletes.map((a, ai) => (ai === athleteIndex ? { ...a, text: e.target.value } : a))\n                                    )\n                                }\n                            />\n                            <Form.Control\n                                style={{ background: !athlete.enabled && \"#6c757d80\" }}\n                                type=\"number\"\n                                placeholder=\"Time (in seconds)\"\n                                min={1}\n                                value={athlete.time}\n                                onChange={(e) =>\n                                    onChange(\n                                        athletes.map((a, ai) => (ai === athleteIndex ? { ...a, time: +e.target.value } : a))\n                                    )\n                                }\n                            />\n                            <InputGroup.Append>\n                                <ButtonGroup toggle>\n                                    <ToggleButton\n                                        variant=\"outline-secondary\"\n                                        type=\"checkbox\"\n                                        name={`athlete-${athleteIndex}-enabled`}\n                                        checked={!athlete.enabled}\n                                        disabled={athlete.enabled && athletes.filter((a) => a.enabled).length === 1}\n                                        onChange={(e) =>\n                                            onChange(\n                                                athletes.map((a, ai) =>\n                                                    ai === athleteIndex ? { ...a, enabled: !e.target.checked } : a\n                                                )\n                                            )\n                                        }\n                                    >\n                                        <FontAwesomeIcon icon={faSkullCrossbones} />\n                                    </ToggleButton>\n                                </ButtonGroup>\n                            </InputGroup.Append>\n                        </InputGroup>\n                    </Col>\n                </Form.Group>\n            ))}\n        </>\n    );\n}\n","export default __webpack_public_path__ + \"static/media/discord.3372aeeb.svg\";","export default __webpack_public_path__ + \"static/media/discordMark.d2c3bfa7.svg\";","import { Alert, Badge, Col, Row } from \"react-bootstrap\";\nimport discordLogo from \"../assets/discord.svg\";\nimport discordMarkLogo from \"../assets/discordMark.svg\";\n\nexport function DiscordBot() {\n    return (\n        <Alert variant=\"info\">\n            <Alert.Heading>\n                Discord Bot{\" \"}\n                <Badge pill variant=\"primary\">\n                    Beta\n                </Badge>\n            </Alert.Heading>\n            <Row>\n                <Col xs={12} sm={4} md={2}>\n                    <img src={discordLogo} alt=\"Discord Logo\" className=\"d-block d-sm-none\" />\n                    <img src={discordMarkLogo} alt=\"Discord Logo\" className=\"d-none d-sm-block\" />\n                </Col>\n                <Col xs={12} sm={8} md={10}>\n                    <p className=\"mt-2\">\n                        No need to run the Web App on a rider's computer and mess around with the audio setup. Just add the\n                        TTT-Timer Discord Bot to your server and type <code>!t help</code> for details on how to use it.\n                        After starting the timer, it will appear as a user within your call and coach you through the race.\n                    </p>\n\n                    <div className=\"d-flex justify-content-end\">\n                        <a\n                            className=\"btn btn-primary\"\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            href=\"https://discord.com/api/oauth2/authorize?client_id=806979974594560060&amp;permissions=3155968&amp;scope=bot\"\n                        >\n                            Install\n                        </a>\n                    </div>\n                </Col>\n            </Row>\n        </Alert>\n    );\n}\n","import { faGithub, faPaypal } from \"@fortawesome/free-brands-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport function Footer() {\n    return (\n        <footer className=\"text-muted mt-4 mb-2 text-center\">\n            <p>\n                <small>\n                    Made with â™¥ for{\" \"}\n                    <a href=\"https://www.wtrl.racing\" rel=\"noopener noreferrer\" target=\"_blank\">\n                        WTRL\n                    </a>{\" \"}\n                    by{\" \"}\n                    <a href=\"mailto:tttt@andipaetzold.com\" rel=\"noopener noreferrer\" target=\"_blank\">\n                        Andi P&auml;tzold\n                    </a>\n                </small>\n            </p>\n            <p>\n                <small>\n                    <a href=\"https://paypal.me/andipaetzold\" rel=\"noopener noreferrer\" target=\"_blank\">\n                        <FontAwesomeIcon icon={faPaypal} /> Donate via PayPal\n                    </a>\n                </small>\n            </p>\n            <p>\n                <small>\n                    <a href=\"https://github.com/andipaetzold/tttt\" rel=\"noopener noreferrer\" target=\"_blank\">\n                        <FontAwesomeIcon icon={faGithub} /> GitHub\n                    </a>\n                </small>\n            </p>\n        </footer>\n    );\n}\n","import { faBiking } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { Navbar } from \"react-bootstrap\";\n\nexport function Header() {\n    return (\n        <Navbar bg=\"light\" className=\"mb-2\">\n            <Navbar.Brand className=\"mx-auto\">\n                <FontAwesomeIcon icon={faBiking} /> Team Time Trial Timer <FontAwesomeIcon icon={faBiking} />\n            </Navbar.Brand>\n        </Navbar>\n    );\n}\n","import { Button, Form } from \"react-bootstrap\";\nimport { speakCommand } from \"../common/speech\";\n\nexport function VoiceSettings({ voices, voice, onChange }) {\n    const handleChange = (e) => {\n        const newVoiceURI = e.target.value;\n        const newVoice = voices.find((v) => v.voiceURI === newVoiceURI);\n\n        if (!newVoice) {\n            return;\n        }\n\n        speakCommand(\"voiceChanged\", {}, newVoice);\n        onChange(newVoice);\n    };\n    return (\n        <Form.Group controlId=\"voice\">\n            <Form.Label>Voice</Form.Label>\n            <Form.Control as=\"select\" onChange={handleChange} value={voice?.voiceURI} disabled={voices.length === 0}>\n                {voices.length > 0 ? (\n                    voices.map((v) => (\n                        <option key={v.voiceURI} value={v.voiceURI}>\n                            {v.name}\n                        </option>\n                    ))\n                ) : (\n                    <option key=\"default\">Default</option>\n                )}\n            </Form.Control>\n            <Form.Text>\n                If the voice output does not work anymore, click{\" \"}\n                <Button\n                    style={{\n                        padding: 0,\n                        fontSize: \"100%\",\n                        border: \"none\",\n                    }}\n                    variant=\"link\"\n                    onClick={() => {\n                        onChange(undefined);\n\n                        // make sure the changes are saved to local storage\n                        setTimeout(() => {\n                            window.location.reload();\n                        }, 0);\n                    }}\n                >\n                    here\n                </Button>{\" \"}\n                to reset the app and keep the default voice.\n            </Form.Text>\n        </Form.Group>\n    );\n}\n","import { faClock } from \"@fortawesome/free-regular-svg-icons\";\nimport { faArrowRight, faForward, faPause, faPlay, faStop } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport useInterval from \"@use-it/interval\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { Button, Card, Container, Form, Jumbotron, ProgressBar } from \"react-bootstrap\";\nimport { loadConfig, saveConfig } from \"../common/config\";\nimport { DEFAULT_ATHLETE_NAMES, DEFAULT_TIME_PER_ATHLETE } from \"../common/constants\";\nimport { speakCommand } from \"../common/speech\";\nimport { toSeconds } from \"../common/util\";\nimport { useVoices } from \"../hooks/useVoices\";\nimport { useWakeLock } from \"../hooks/useWakeLock\";\nimport { AthletesSettings } from \"./AthletesSettings\";\nimport { CopyButton } from \"./CopyButton\";\nimport { DiscordBot } from \"./DiscordBot\";\nimport { Footer } from \"./Footer\";\nimport { Header } from \"./Header\";\nimport { VoiceSettings } from \"./VoiceSettings\";\n\nconst initialConfig = loadConfig();\n\nexport default function App() {\n    const [state, setState] = useState(\"stopped\");\n\n    useWakeLock(state === \"running\" || state === \"paused\");\n\n    const [startDelay, setStartDelay] = useState(initialConfig.startDelay);\n    const [speechEnabled, setSpeechEnabled] = useState(initialConfig.speechEnabled);\n    const [athletes, setAthletes] = useState(initialConfig.athletes);\n\n    const getAthleteName = (athleteIndex) => {\n        if (athleteIndex === undefined) {\n            return \"\";\n        }\n\n        return athletes[athleteIndex].text || `Athlete ${athleteIndex + 1}`;\n    };\n\n    const voices = useVoices();\n    const [voiceURI, setVoiceURI] = useState(initialConfig.voice);\n    const voice = voices.find((v) => v.voiceURI === voiceURI);\n\n    const [timeUntilNextChange, setTimeUntilNextChange] = useState(0);\n    const [currentAthlete, setCurrentAthlete] = useState(undefined);\n\n    useEffect(() => {\n        saveConfig({ athletes, startDelay, speechEnabled, voice: voiceURI });\n    }, [athletes, startDelay, speechEnabled, voiceURI]);\n\n    const nextAthlete = useMemo(() => {\n        const athletesWithIndex = athletes.map((a, ai) => ({ ...a, index: ai }));\n\n        if (currentAthlete === undefined) {\n            return athletesWithIndex.find((a) => a.enabled).index;\n        }\n\n        return [...athletesWithIndex.slice(currentAthlete + 1), ...athletesWithIndex].filter((a) => a.enabled)[0].index;\n    }, [currentAthlete, athletes]);\n\n    const startTimeRef = useRef();\n    const prevTimeRef = useRef();\n    const pauseTimeRef = useRef();\n\n    const speak = (command) => {\n        if (!speechEnabled) {\n            return;\n        }\n        speakCommand(command, { nextAthlete: getAthleteName(nextAthlete) }, voice);\n    };\n\n    const changeToNextAthlete = () => {\n        setCurrentAthlete(nextAthlete);\n        setTimeUntilNextChange(athletes[nextAthlete].time);\n\n        const now = Date.now();\n        startTimeRef.current = now;\n        if (state === \"paused\") {\n            pauseTimeRef.current = now;\n        }\n    };\n\n    useInterval(() => {\n        if (state !== \"running\") {\n            return;\n        }\n\n        const changeTime = currentAthlete === undefined ? startDelay : athletes[currentAthlete].time;\n\n        const now = Date.now();\n\n        const secondsSinceStart = toSeconds(now - startTimeRef.current);\n        const prevSecondsSinceStart = toSeconds(prevTimeRef.current - startTimeRef.current);\n\n        if (secondsSinceStart !== prevSecondsSinceStart) {\n            if (secondsSinceStart >= changeTime) {\n                speak(currentAthlete === undefined ? \"start\" : 0);\n                changeToNextAthlete();\n            } else {\n                speak(changeTime - secondsSinceStart);\n                setTimeUntilNextChange(Math.max(changeTime - secondsSinceStart, 0));\n            }\n        }\n\n        prevTimeRef.current = now;\n    }, 500);\n\n    const handleStart = () => {\n        const now = Date.now();\n\n        prevTimeRef.current = now;\n        startTimeRef.current = now;\n\n        setTimeUntilNextChange(startDelay > 0 ? startDelay : athletes[0].time);\n        setCurrentAthlete(startDelay > 0 ? undefined : nextAthlete);\n\n        setState(\"running\");\n    };\n\n    const handleStop = () => {\n        setState(\"stopped\");\n    };\n\n    const handlePause = () => {\n        setState(\"paused\");\n        pauseTimeRef.current = Date.now();\n    };\n\n    const handleResume = () => {\n        setState(\"running\");\n        startTimeRef.current = Date.now() - (pauseTimeRef.current - startTimeRef.current);\n    };\n\n    return (\n        <>\n            <Header />\n\n            <Container>\n                <Jumbotron className=\"mb-2\">\n                    {state !== \"stopped\" ? (\n                        <>\n                            <h1 className=\"text-center display-2\">\n                                {currentAthlete === undefined ? \"Wait\" : getAthleteName(currentAthlete)}\n                            </h1>\n\n                            <h2 className=\"text-center display-5\">\n                                <FontAwesomeIcon icon={faArrowRight} /> {getAthleteName(nextAthlete)}\n                            </h2>\n\n                            <h3 className=\"text-center display-6\">\n                                <FontAwesomeIcon icon={faClock} /> {timeUntilNextChange}s\n                            </h3>\n                            <ProgressBar\n                                style={{ transform: \"scaleX(-1)\", background: \"white\" }}\n                                now={timeUntilNextChange}\n                                max={currentAthlete === undefined ? startDelay : athletes[currentAthlete].time}\n                            />\n\n                            <div className=\"mt-4 text-center\">\n                                <Button variant=\"danger\" className=\"mr-1\" onClick={handleStop}>\n                                    <FontAwesomeIcon icon={faStop} /> Stop\n                                </Button>\n                                {state === \"paused\" ? (\n                                    <Button variant=\"info\" className=\"mr-1\" onClick={handleResume}>\n                                        <FontAwesomeIcon icon={faPlay} /> Resume\n                                    </Button>\n                                ) : (\n                                    <Button variant=\"info\" className=\"mr-1\" onClick={handlePause}>\n                                        <FontAwesomeIcon icon={faPause} /> Pause\n                                    </Button>\n                                )}\n\n                                <Button variant=\"warning\" onClick={changeToNextAthlete}>\n                                    <FontAwesomeIcon icon={faForward} /> Skip\n                                </Button>\n                            </div>\n                        </>\n                    ) : (\n                        <div className=\"text-center\">\n                            <Button variant=\"primary\" onClick={handleStart} size=\"lg\">\n                                <FontAwesomeIcon icon={faPlay} /> Start\n                            </Button>\n                        </div>\n                    )}\n                </Jumbotron>\n\n                <Card className=\"mb-2\">\n                    <Card.Body>\n                        <AthletesSettings athletes={athletes} onChange={setAthletes} />\n\n                        <h3>Settings</h3>\n                        <Form.Group controlId=\"startDelay\">\n                            <Form.Label>\n                                Start Delay (in seconds) <CopyButton command={`!t config startDelay ${startDelay}`} />\n                            </Form.Label>\n                            <Form.Control\n                                type=\"number\"\n                                value={startDelay}\n                                onChange={(e) => setStartDelay(+e.target.value)}\n                                min={0}\n                            />\n                        </Form.Group>\n\n                        <Form.Group controlId=\"athleteCount\">\n                            <Form.Label>Athlete Count</Form.Label>\n                            <Form.Control\n                                type=\"number\"\n                                value={athletes.length}\n                                onChange={(e) => {\n                                    const newCount = Math.max(1, Math.min(DEFAULT_ATHLETE_NAMES.length, +e.target.value));\n                                    const newAthletes = [...new Array(newCount).keys()].map((i) => ({\n                                        text: athletes[i]?.text ?? DEFAULT_ATHLETE_NAMES[i],\n                                        time: athletes[i]?.time ?? DEFAULT_TIME_PER_ATHLETE,\n                                        enabled: athletes[i]?.enabled ?? true,\n                                    }));\n                                    setAthletes(newAthletes);\n                                }}\n                                min={1}\n                                max={DEFAULT_ATHLETE_NAMES.length}\n                            />\n                        </Form.Group>\n\n                        <Form.Group controlId=\"speechEnabled\">\n                            <Form.Check\n                                type=\"checkbox\"\n                                label=\"Voice Output\"\n                                checked={speechEnabled}\n                                onChange={(e) => setSpeechEnabled(e.target.checked)}\n                            />\n                            <Form.Text>Voice Output is not supported on iOS</Form.Text>\n                        </Form.Group>\n                        <VoiceSettings voices={voices} voice={voice} onChange={(v) => setVoiceURI(v?.voiceURI)} />\n                    </Card.Body>\n                </Card>\n\n                <DiscordBot />\n                <Footer />\n            </Container>\n        </>\n    );\n}\n","import { useEffect, useState } from \"react\";\n\nexport function useVoices() {\n    const [voices, setVoices] = useState([]);\n\n    const updateVoices = () => {\n        setVoices(window.speechSynthesis.getVoices());\n    };\n\n    useEffect(() => {\n        if (typeof window.speechSynthesis === \"undefined\") {\n            return;\n        }\n\n        updateVoices();\n        window.speechSynthesis.onvoiceschanged = updateVoices;\n        return () => (window.speechSynthesis.onvoiceschanged = undefined);\n    }, []);\n\n    return voices.filter((voice) => voice.lang.startsWith(\"en-\"));\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}