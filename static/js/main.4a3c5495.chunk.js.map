{"version":3,"sources":["common/constants.js","common/config.js","common/speech.js","common/util.js","hooks/useWakeLock.js","components/CopyButton.js","components/AthletesSettings.js","assets/discord.svg","assets/discordMark.svg","components/DiscordBot.js","components/Footer.js","components/Header.js","components/App.js","index.js"],"names":["DEFAULT_ATHLETE_NAMES","LOCAL_STORAGE_KEY","DEFAULT_ATHLETES","slice","map","athleteName","text","enabled","time","voiceCommands","nextAthlete","started","speakCommand","command","args","voice","msg","SpeechSynthesisUtterance","lang","window","speechSynthesis","cancel","speak","toSeconds","ms","Math","round","secondsToString","fullTimeInSeconds","minutes","floor","seconds","toString","padStart","isSupported","navigator","CopyButton","useState","copied","setCopied","copiedTimeout","useRef","undefined","OverlayTrigger","placement","overlay","Tooltip","id","Button","variant","size","className","onClick","clipboard","writeText","current","clearTimeout","setTimeout","icon","faCopy","AthletesSettings","athletes","onChange","running","discordCommand","athlete","trim","replaceAll","join","getBackgroundColor","athleteIndex","Form","Group","as","Row","controlId","Col","sm","InputGroup","Control","style","background","type","placeholder","value","e","a","ai","target","min","step","Append","ButtonGroup","toggle","ToggleButton","name","checked","disabled","filter","length","faSkullCrossbones","_","faTrash","block","faPlus","DiscordBot","Alert","Heading","Badge","pill","xs","md","src","discordLogo","alt","discordMarkLogo","rel","href","Footer","faPaypal","faGithub","Header","Navbar","bg","Brand","faBiking","initialConfig","rawConfig","localStorage","getItem","config","JSON","parse","speechEnabled","startDelay","loadConfig","App","state","setState","useFullScreenHandle","fullscreenRef","node","fullscreenActive","active","enterFullscreen","enter","leaveFullscreen","exit","wakelockRef","useEffect","release","request","document","visibilityState","wakeLock","addEventListener","removeEventListener","useWakeLock","setStartDelay","setSpeechEnabled","setAthletes","getAthleteName","timeUntilNextChange","setTimeUntilNextChange","currentAthlete","setCurrentAthlete","setItem","stringify","useMemo","athletesWithIndex","index","find","startTimeRef","prevTimeRef","pauseTimeRef","changeToNextAthlete","now","Date","useInterval","changeTime","secondsSinceStart","max","Container","Jumbotron","ref","faArrowRight","faClock","ProgressBar","transform","faStop","faPlay","faPause","faForward","right","bottom","faVolumeUp","faVolumeMute","faCompress","faExpand","maxWidth","Card","Body","Label","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4a3c5495.chunk.js","sourcesContent":["export const DEFAULT_ATHLETE_NAMES = [\"Amelia\", \"Bowie\", \"Coco\", \"Dan\", \"Emma\", \"Finn\", \"Grace\", \"Henry\", \"Irene\", \"Jack\"];\n\nexport const DEFAULT_START_DELAY = 0;\nexport const DEFAULT_TIME_PER_ATHLETE = 30;\nexport const DEFAULT_SPEECH_ENABLED = true;\n","import { DEFAULT_ATHLETE_NAMES, DEFAULT_SPEECH_ENABLED, DEFAULT_START_DELAY, DEFAULT_TIME_PER_ATHLETE } from \"./constants\";\n\nconst LOCAL_STORAGE_KEY = \"config\";\n\nconst DEFAULT_ATHLETES = DEFAULT_ATHLETE_NAMES.slice(0, 6).map((athleteName) => ({\n    text: athleteName,\n    enabled: true,\n    time: DEFAULT_TIME_PER_ATHLETE,\n}));\n\nexport function loadConfig() {\n    try {\n        const rawConfig = localStorage.getItem(LOCAL_STORAGE_KEY);\n        const config = JSON.parse(rawConfig);\n\n        return {\n            athletes: config.athletes || DEFAULT_ATHLETES,\n            speechEnabled: config.speechEnabled,\n            startDelay: config.startDelay,\n        };\n    } catch {\n        return {\n            athletes: DEFAULT_ATHLETES,\n            speechEnabled: DEFAULT_SPEECH_ENABLED,\n            startDelay: DEFAULT_START_DELAY,\n        };\n    }\n}\n\nexport function saveConfig(config) {\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(config));\n}\n","const voiceCommands = {\n    [10 * 60]: () => \"10 minutes\",\n    [5 * 60]: () => \"5 minutes\",\n    [3 * 60]: () => \"3 minutes\",\n    [2 * 60]: () => \"2 minutes\",\n    [1 * 60]: () => \"1 minute\",\n    30: () => \"30 seconds\",\n    15: ({ nextAthlete }) => `${nextAthlete}. Get ready.`,\n    10: ({ started }) => (started ? \"Change in 10\" : \"Start in 10\"),\n    5: () => \"Five\",\n    2: () => \"Two\",\n    1: () => \"One\",\n    0: ({ nextAthlete, started }) => (started ? `Change to ${nextAthlete}` : \"Let's go\"),\n};\n\nexport function speakCommand(command, args) {\n    if (voiceCommands[command]) {\n        speak(voiceCommands[command](args));\n    }\n}\n\nexport function speak(text, voice) {\n    const msg = new SpeechSynthesisUtterance();\n    msg.text = text;\n    msg.lang = \"en-US\";\n    msg.voice = voice;\n\n    window.speechSynthesis.cancel();\n    window.speechSynthesis.speak(msg);\n}\n","export function toSeconds(ms) {\n    return Math.round(ms / 1_000);\n}\n\nexport function secondsToString(fullTimeInSeconds) {\n    const minutes = Math.floor(fullTimeInSeconds / 60);\n    const seconds = fullTimeInSeconds - minutes * 60;\n\n    if (minutes === 0) {\n        return `${seconds}s`\n    }\n\n    return `${minutes}:${seconds.toString().padStart(2, \"0\")}min`;\n}\n","import { useEffect, useRef } from \"react\";\n\nconst isSupported = \"wakeLock\" in navigator;\n\nexport function useWakeLock(active) {\n    const wakelockRef = useRef(null);\n\n    useEffect(() => {\n        if (!isSupported) {\n            return;\n        }\n\n        if (!active) {\n            return;\n        }\n\n        const release = async () => {\n            await wakelockRef.current?.release();\n            wakelockRef.current = null;\n        };\n\n        const request = async () => {\n            if (document.visibilityState !== \"visible\") {\n                return;\n            }\n\n            try {\n                await release();\n                wakelockRef.current = await navigator.wakeLock.request(\"screen\");\n            } catch {}\n        };\n\n        request();\n        document.addEventListener(\"visibilitychange\", request);\n\n        return () => {\n            release();\n            document.removeEventListener(\"visibilitychange\", request);\n        };\n    }, [active]);\n}\n","import { faCopy } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { useRef, useState } from \"react\";\nimport { Button, OverlayTrigger, Tooltip } from \"react-bootstrap\";\n\nexport function CopyButton({ command }) {\n    const [copied, setCopied] = useState(false);\n    const copiedTimeout = useRef(undefined);\n\n    const copyCommand = () => {\n        navigator.clipboard.writeText(command);\n\n        if (copiedTimeout.current) {\n            clearTimeout(copiedTimeout.current);\n            copiedTimeout.current = undefined;\n        }\n        setCopied(true);\n        copiedTimeout.current = setTimeout(() => setCopied(false), 5_000);\n    };\n\n    return (\n        <OverlayTrigger\n            placement=\"right\"\n            overlay={<Tooltip id=\"tooltip-copy-athletes\">{copied ? \"Copied!\" : \"Copy Discord Bot command\"}</Tooltip>}\n        >\n            <Button variant=\"outline-link\" size=\"sm\" className=\"m-0 p-0 border-0\" onClick={copyCommand}>\n                <FontAwesomeIcon icon={faCopy} />\n            </Button>\n        </OverlayTrigger>\n    );\n}\n","import { faSkullCrossbones, faTrash, faPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { Button, ButtonGroup, Col, Form, InputGroup, Row, ToggleButton } from \"react-bootstrap\";\nimport { DEFAULT_ATHLETE_NAMES, DEFAULT_TIME_PER_ATHLETE } from \"../common/constants\";\nimport { CopyButton } from \"./CopyButton\";\n\nexport function AthletesSettings({ athletes, onChange, running: started }) {\n    const discordCommand = `!t config athletes ${athletes\n        .map((athlete) => `${athlete.text.trim().replaceAll(\" \", \"_\").replaceAll(\" \", \"_\")}:${athlete.time}`)\n        .join(\" \")}`;\n\n    const getBackgroundColor = (athleteIndex) => {\n        if (!started) {\n            return \"#fff\";\n        }\n\n        if (!athletes[athleteIndex].enabled) {\n            return \"#6c757d80\";\n        }\n\n        return \"#fff\";\n    };\n\n    return (\n        <>\n            <h2 className=\"mb-3\">\n                Athletes <CopyButton command={discordCommand} />\n            </h2>\n\n            {athletes.map((athlete, athleteIndex) => (\n                <Form.Group key={athleteIndex} as={Row} controlId={`athlete-${athleteIndex}`}>\n                    <Col sm={12}>\n                        <InputGroup>\n                            <Form.Control\n                                style={{ background: getBackgroundColor(athleteIndex) }}\n                                type=\"text\"\n                                placeholder=\"Name\"\n                                value={athlete.text}\n                                onChange={(e) =>\n                                    onChange(\n                                        athletes.map((a, ai) => (ai === athleteIndex ? { ...a, text: e.target.value } : a))\n                                    )\n                                }\n                            />\n                            <Form.Control\n                                style={{ background: getBackgroundColor(athleteIndex) }}\n                                type=\"number\"\n                                placeholder=\"Time (in seconds)\"\n                                min={5}\n                                step={5}\n                                value={athlete.time}\n                                onChange={(e) =>\n                                    onChange(\n                                        athletes.map((a, ai) => (ai === athleteIndex ? { ...a, time: +e.target.value } : a))\n                                    )\n                                }\n                            />\n                            <InputGroup.Append>\n                                <ButtonGroup toggle>\n                                    {started && (\n                                        <ToggleButton\n                                            variant=\"outline-secondary\"\n                                            type=\"checkbox\"\n                                            name={`athlete-${athleteIndex}-enabled`}\n                                            checked={!athlete.enabled}\n                                            disabled={athlete.enabled && athletes.filter((a) => a.enabled).length === 1}\n                                            onChange={(e) =>\n                                                onChange(\n                                                    athletes.map((a, ai) =>\n                                                        ai === athleteIndex ? { ...a, enabled: !e.target.checked } : a\n                                                    )\n                                                )\n                                            }\n                                        >\n                                            <FontAwesomeIcon icon={faSkullCrossbones} />\n                                        </ToggleButton>\n                                    )}\n                                    {!started && (\n                                        <Button\n                                            variant=\"danger\"\n                                            disabled={athletes.length === 1}\n                                            onClick={() => onChange(athletes.filter((_, ai) => ai !== athleteIndex))}\n                                        >\n                                            <FontAwesomeIcon icon={faTrash} />\n                                        </Button>\n                                    )}\n                                </ButtonGroup>\n                            </InputGroup.Append>\n                        </InputGroup>\n                    </Col>\n                </Form.Group>\n            ))}\n\n            {!started && (\n                <Button\n                    variant=\"light\"\n                    block\n                    onClick={() => {\n                        onChange([\n                            ...athletes,\n                            {\n                                text: DEFAULT_ATHLETE_NAMES[athletes.length] ?? \"\",\n                                time: DEFAULT_TIME_PER_ATHLETE,\n                                enabled: true,\n                            },\n                        ]);\n                    }}\n                >\n                    <FontAwesomeIcon icon={faPlus} /> Add athlete\n                </Button>\n            )}\n        </>\n    );\n}\n","export default __webpack_public_path__ + \"static/media/discord.3372aeeb.svg\";","export default __webpack_public_path__ + \"static/media/discordMark.d2c3bfa7.svg\";","import { Alert, Badge, Col, Row } from \"react-bootstrap\";\nimport discordLogo from \"../assets/discord.svg\";\nimport discordMarkLogo from \"../assets/discordMark.svg\";\n\nexport function DiscordBot() {\n    return (\n        <Alert variant=\"info\">\n            <Alert.Heading>\n                Discord Bot{\" \"}\n                <Badge pill variant=\"primary\">\n                    Beta\n                </Badge>\n            </Alert.Heading>\n            <Row>\n                <Col xs={12} sm={4} md={2}>\n                    <img src={discordLogo} alt=\"Discord Logo\" className=\"d-block d-sm-none\" />\n                    <img src={discordMarkLogo} alt=\"Discord Logo\" className=\"d-none d-sm-block\" />\n                </Col>\n                <Col xs={12} sm={8} md={10}>\n                    <p className=\"mt-2\">\n                        No need to run the Web App on a rider's computer and mess around with the audio setup. Just add the\n                        TTT-Timer Discord Bot to your server and type <code>!t help</code> for details on how to use it.\n                        After starting the timer, it will appear as a user within your call and coach you through the race.\n                    </p>\n\n                    <div className=\"d-flex justify-content-end\">\n                        <a\n                            className=\"btn btn-light\"\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            href=\"https://andipaetzold.github.io/tttt-discord\"\n                        >\n                            Documentation\n                        </a>\n\n                        <a\n                            className=\"btn btn-primary ml-2\"\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            href=\"https://discord.com/api/oauth2/authorize?client_id=806979974594560060&amp;permissions=3155968&amp;scope=bot\"\n                        >\n                            Install\n                        </a>\n                    </div>\n                </Col>\n            </Row>\n        </Alert>\n    );\n}\n","import { faGithub, faPaypal } from \"@fortawesome/free-brands-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport function Footer() {\n    return (\n        <footer className=\"text-muted mt-4 mb-2 text-center\">\n            <p>\n                <small>\n                    Made with â™¥ for{\" \"}\n                    <a href=\"https://www.wtrl.racing\" rel=\"noopener noreferrer\" target=\"_blank\">\n                        WTRL\n                    </a>{\" \"}\n                    by{\" \"}\n                    <a href=\"mailto:tttt@andipaetzold.com\" rel=\"noopener noreferrer\" target=\"_blank\">\n                        Andi P&auml;tzold\n                    </a>\n                </small>\n            </p>\n            <p>\n                <small>\n                    <a href=\"https://paypal.me/andipaetzold\" rel=\"noopener noreferrer\" target=\"_blank\">\n                        <FontAwesomeIcon icon={faPaypal} /> Donate via PayPal\n                    </a>\n                </small>\n            </p>\n            <p>\n                <small>\n                    <a href=\"https://github.com/andipaetzold/tttt\" rel=\"noopener noreferrer\" target=\"_blank\">\n                        <FontAwesomeIcon icon={faGithub} /> GitHub\n                    </a>\n                </small>\n            </p>\n        </footer>\n    );\n}\n","import { faBiking } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { Navbar } from \"react-bootstrap\";\n\nexport function Header() {\n    return (\n        <Navbar bg=\"light\" className=\"mb-2\">\n            <Navbar.Brand className=\"mx-auto\">\n                <FontAwesomeIcon icon={faBiking} /> Team Time Trial Timer <FontAwesomeIcon icon={faBiking} />\n            </Navbar.Brand>\n        </Navbar>\n    );\n}\n","import { faClock } from \"@fortawesome/free-regular-svg-icons\";\nimport {\n    faArrowRight,\n    faCompress,\n    faExpand,\n    faForward,\n    faPause,\n    faPlay,\n    faStop,\n    faVolumeMute,\n    faVolumeUp,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport useInterval from \"@use-it/interval\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { Button, Card, Container, Form, Jumbotron, ProgressBar } from \"react-bootstrap\";\nimport { loadConfig, saveConfig } from \"../common/config\";\nimport { speakCommand } from \"../common/speech\";\nimport { toSeconds, secondsToString } from \"../common/util\";\nimport { useWakeLock } from \"../hooks/useWakeLock\";\nimport { AthletesSettings } from \"./AthletesSettings\";\nimport { CopyButton } from \"./CopyButton\";\nimport { DiscordBot } from \"./DiscordBot\";\nimport { Footer } from \"./Footer\";\nimport { Header } from \"./Header\";\nimport { useFullScreenHandle } from \"react-full-screen\";\n\nconst initialConfig = loadConfig();\n\nexport default function App() {\n    const [state, setState] = useState(\"stopped\");\n    const started = state !== \"stopped\";\n\n    const {\n        node: fullscreenRef,\n        active: fullscreenActive,\n        enter: enterFullscreen,\n        exit: leaveFullscreen,\n    } = useFullScreenHandle();\n\n    useWakeLock(state === \"running\" || state === \"paused\");\n\n    const [startDelay, setStartDelay] = useState(initialConfig.startDelay);\n    const [speechEnabled, setSpeechEnabled] = useState(initialConfig.speechEnabled);\n    const [athletes, setAthletes] = useState(initialConfig.athletes);\n\n    const getAthleteName = (athleteIndex) => {\n        if (athleteIndex === undefined) {\n            return \"\";\n        }\n\n        return athletes[athleteIndex].text || `Athlete ${athleteIndex + 1}`;\n    };\n\n    const [timeUntilNextChange, setTimeUntilNextChange] = useState(0);\n    const [currentAthlete, setCurrentAthlete] = useState(undefined);\n\n    useEffect(() => {\n        saveConfig({ athletes, startDelay, speechEnabled });\n    }, [athletes, startDelay, speechEnabled]);\n\n    const nextAthlete = useMemo(() => {\n        const athletesWithIndex = athletes.map((a, ai) => ({ ...a, index: ai }));\n\n        if (currentAthlete === undefined) {\n            return athletesWithIndex.find((a) => a.enabled).index;\n        }\n\n        return [...athletesWithIndex.slice(currentAthlete + 1), ...athletesWithIndex].filter((a) => a.enabled)[0].index;\n    }, [currentAthlete, athletes]);\n\n    const startTimeRef = useRef();\n    const prevTimeRef = useRef();\n    const pauseTimeRef = useRef();\n\n    const speak = (command) => {\n        if (!speechEnabled) {\n            return;\n        }\n        speakCommand(command, {\n            nextAthlete: getAthleteName(nextAthlete),\n            started: currentAthlete !== undefined,\n        });\n    };\n\n    const changeToNextAthlete = () => {\n        setCurrentAthlete(nextAthlete);\n        setTimeUntilNextChange(athletes[nextAthlete].time);\n\n        const now = Date.now();\n        startTimeRef.current = now;\n        if (state === \"paused\") {\n            pauseTimeRef.current = now;\n        }\n    };\n\n    useInterval(() => {\n        if (state !== \"running\") {\n            return;\n        }\n\n        const changeTime = currentAthlete === undefined ? startDelay : athletes[currentAthlete].time;\n\n        const now = Date.now();\n\n        const secondsSinceStart = toSeconds(now - startTimeRef.current);\n        const prevSecondsSinceStart = toSeconds(prevTimeRef.current - startTimeRef.current);\n\n        if (secondsSinceStart !== prevSecondsSinceStart) {\n            speak(Math.max(0, changeTime - secondsSinceStart));\n            if (secondsSinceStart >= changeTime) {\n                changeToNextAthlete();\n            } else {\n                setTimeUntilNextChange(Math.max(changeTime - secondsSinceStart, 0));\n            }\n        }\n\n        prevTimeRef.current = now;\n    }, 500);\n\n    const handleStart = () => {\n        const now = Date.now();\n\n        prevTimeRef.current = now;\n        startTimeRef.current = now;\n\n        setTimeUntilNextChange(startDelay > 0 ? startDelay : athletes[0].time);\n        setCurrentAthlete(startDelay > 0 ? undefined : nextAthlete);\n        setAthletes((athletes) => athletes.map((a) => ({ ...a, enabled: true })));\n\n        setState(\"running\");\n    };\n\n    const handleStop = () => {\n        setState(\"stopped\");\n        setAthletes((athletes) => athletes.map((a) => ({ ...a, enabled: true })));\n    };\n\n    const handlePause = () => {\n        setState(\"paused\");\n        pauseTimeRef.current = Date.now();\n    };\n\n    const handleResume = () => {\n        setState(\"running\");\n        startTimeRef.current = Date.now() - (pauseTimeRef.current - startTimeRef.current);\n    };\n\n    return (\n        <>\n            <Header />\n\n            <Container>\n                <Jumbotron\n                    className=\"pt-4 mb-2 position-relative d-flex flex-column align-items-center justify-content-center\"\n                    ref={fullscreenRef}\n                >\n                    {started ? (\n                        <div className=\"w-100\">\n                            <h1 className=\"text-center display-2\">\n                                {currentAthlete === undefined ? \"Wait\" : getAthleteName(currentAthlete)}\n                            </h1>\n\n                            <h2 className=\"text-center display-5\">\n                                <FontAwesomeIcon icon={faArrowRight} /> {getAthleteName(nextAthlete)}\n                            </h2>\n\n                            <h3 className=\"text-center display-6\">\n                                <FontAwesomeIcon icon={faClock} /> {secondsToString(timeUntilNextChange)}\n                            </h3>\n                            <ProgressBar\n                                style={{ transform: \"scaleX(-1)\", background: \"white\" }}\n                                now={timeUntilNextChange}\n                                max={currentAthlete === undefined ? startDelay : athletes[currentAthlete].time}\n                            />\n\n                            <div className=\"mt-4 text-center\">\n                                <Button variant=\"danger\" className=\"mr-1\" onClick={handleStop}>\n                                    <FontAwesomeIcon icon={faStop} /> Stop\n                                </Button>\n                                {state === \"paused\" ? (\n                                    <Button variant=\"info\" className=\"mr-1\" onClick={handleResume}>\n                                        <FontAwesomeIcon icon={faPlay} /> Resume\n                                    </Button>\n                                ) : (\n                                    <Button variant=\"info\" className=\"mr-1\" onClick={handlePause}>\n                                        <FontAwesomeIcon icon={faPause} /> Pause\n                                    </Button>\n                                )}\n\n                                <Button variant=\"warning\" onClick={changeToNextAthlete}>\n                                    <FontAwesomeIcon icon={faForward} /> Skip\n                                </Button>\n                            </div>\n                        </div>\n                    ) : (\n                        <div className=\"text-center\">\n                            <Button variant=\"primary\" onClick={handleStart} size=\"lg\">\n                                <FontAwesomeIcon icon={faPlay} /> Start{\" \"}\n                                {startDelay > 0 && `in ${secondsToString(startDelay)}`}\n                            </Button>\n                        </div>\n                    )}\n\n                    <div className=\"position-absolute\" style={{ right: 16, bottom: 16 }}>\n                        {speechEnabled ? (\n                            <Button size=\"sm\" variant=\"secondary\" onClick={() => setSpeechEnabled(false)}>\n                                <FontAwesomeIcon icon={faVolumeUp} />\n                            </Button>\n                        ) : (\n                            <Button size=\"sm\" variant=\"danger\" onClick={() => setSpeechEnabled(true)}>\n                                <FontAwesomeIcon icon={faVolumeMute} />\n                            </Button>\n                        )}\n\n                        {fullscreenActive ? (\n                            <Button className=\"ml-2\" size=\"sm\" variant=\"danger\" onClick={leaveFullscreen}>\n                                <FontAwesomeIcon icon={faCompress} />\n                            </Button>\n                        ) : (\n                            <Button className=\"ml-2\" size=\"sm\" variant=\"secondary\" onClick={enterFullscreen}>\n                                <FontAwesomeIcon icon={faExpand} />\n                            </Button>\n                        )}\n                    </div>\n\n                    <div className=\"mt-5\" style={{ maxWidth: \"500px\" }}>\n                        <AthletesSettings athletes={athletes} onChange={setAthletes} started={started} />\n                    </div>\n                </Jumbotron>\n\n                <Card className=\"mb-2\">\n                    <Card.Body>\n                        <h3>Settings</h3>\n\n                        <Form.Group controlId=\"startDelay\">\n                            <Form.Label>\n                                Start Delay (in seconds) <CopyButton command={`!t config delay ${startDelay}`} />\n                            </Form.Label>\n                            <Form.Control\n                                type=\"number\"\n                                value={startDelay}\n                                onChange={(e) => setStartDelay(+e.target.value)}\n                                min={0}\n                                step={30}\n                                disabled={started}\n                            />\n                        </Form.Group>\n                    </Card.Body>\n                </Card>\n\n                <DiscordBot />\n                <Footer />\n            </Container>\n        </>\n    );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}